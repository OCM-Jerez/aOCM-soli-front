<app-navbar></app-navbar>

<div class="p-grid">
  <div class="p-col-12">
    <div class="p-text-center myTituloComponent">Solicitudes realizadas</div>

    <div class="p-grid p-jc-end p-mb-4">
      <button
        pButton
        *ngIf="isAdmin"
        [routerLink]="['/solicitudes/new']"
        class="p-button-rounded p-button-success"
        type="button"
        icon="pi pi-plus"
        iconPos="left"
        label="Crear nueva solicitud"
      ></button>
    </div>

    <div class="card"></div>
    <!-- lass="p-datatable-striped" -->
    <p-table
      #dt
      [value]="solicitudes"
      styleC
      [rowHover]="true"
      [rows]="10"
      [paginator]="true"
    >
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="descripcion" style="width: 40rem">
            Descripción
            <p-sortIcon field="descripcion" style="width: 20px"></p-sortIcon>
          </th>
          <th pSortableColumn="fechaSolicitud">
            Fecha solicitud <p-sortIcon field="fechaSolicitud"></p-sortIcon>
          </th>
          <th pSortableColumn="fechaRespuesta">
            Fecha respuesta <p-sortIcon field="fechaRespuesta"></p-sortIcon>
          </th>
          <th pSortableColumn="diasRespuesta">
            Días transcurridos <p-sortIcon field="diasRespuesta"></p-sortIcon>
          </th>
          <th scope="col" style="width: 25rem"><span>Observaciones</span></th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-solicitud>
        <tr>
          <td>{{ solicitud.descripcion }}</td>
          <td>{{ solicitud.fechaSolicitud | date: "dd.MM.yyyy" }}</td>
          <td>{{ solicitud.fechaRespuesta | date: "dd.MM.yyyy" }}</td>
          <td
            style="font-weight: bold"
            [ngStyle]="{
              color: solicitud.diasRespuesta! > 30 ? 'red' : 'black'
            }"
          >
            {{ solicitud.diasRespuesta }}
          </td>
          <td>{{ solicitud.observacion }}</td>

          <td class="text-right">
            <div class="btn-group">
              <button
                pButton
                [routerLink]="['/solicitudes/details', solicitud.id]"
                class="p-button-rounded p-button-info"
                type="button"
                icon="pi pi-eye"
                iconPos="left"
                label="Ver"
              ></button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
