<app-navbar></app-navbar>
<body>
  <div class="p-text-center myTituloComponent">Solicitudes realizadas</div>

  <div class="p-grid p-jc-end p-mb-4">
    <button
      pButton
      *ngIf="isAdmin"
      [routerLink]="['/solicitudes/new']"
      class="p-button-rounded p-button-success"
      type="button"
      icon="pi pi-plus"
      iconPos="left"
      label="Crear nueva solicitud"
    ></button>
  </div>

  <div class="p-grid">
    <div class="p-col p-mt-4">
      <p-table [value]="solicitudes" styleClass="p-datatable-striped">
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="descripcion">Descripción <p-sortIcon field="descripcion"></p-sortIcon></th>
            <th pSortableColumn="descripcion">Fecha solicitud <p-sortIcon field="fechaSolicitud"></p-sortIcon></th>
            <th pSortableColumn="descripcion">Fecha respuesta <p-sortIcon field="fechaRespuesta"></p-sortIcon></th>
            <th pSortableColumn="descripcion">Días transcurridos <p-sortIcon field="diasRespuesta"></p-sortIcon></th>
            <th scope="col"><span>Observaciones</span></th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-solicitud>
          <tr>
            <td>{{ solicitud.descripcion }}</td>
            <td>{{ solicitud.fechaSolicitud | date: "dd.MM.yyyy" }}</td>
            <td>{{ solicitud.fechaRespuesta | date: "dd.MM.yyyy" }}</td>
            <td
              style="font-weight: bold"
              [ngStyle]="{
                color: solicitud.diasRespuesta! > 30 ? 'red' : 'black'
              }"
            >
              {{ solicitud.diasRespuesta }}
            </td>
            <td>{{ solicitud.observacion }}</td>

            <td class="text-right">
              <div class="btn-group">
                <button
                pButton
                [routerLink]="['/solicitudes/details', solicitud.id]"
                class="p-button-rounded p-button-info"
                type="button"
                icon="pi pi-eye"
                iconPos="left"
                label="Ver"
              ></button>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</body>
